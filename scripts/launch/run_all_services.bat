@echo off
REM ?????? ??? ?????????????? ??????? ???? ????????????? ??????? "audio-store".
REM ?????? ?????? ????? ??????? ? ????????? ???? ?????????.

REM Загружаем переменные окружения из файла конфигурации
for /f "usebackq tokens=1,2 delims==" %%a in ("config.env") do (
    set %%a=%%b
)

echo "?????? ????????..."

REM ?????? ??????? "???????" ?? ????? 8002
start "Catalog Service" cmd /k "uvicorn services.catalog.main:app --host 0.0.0.0 --port 8002 --reload"

REM ????????? ????????, ????? ??????? ?? ????????????? ??? ???????
timeout /t 2 /nobreak > nul

REM ?????? ??????? "???????" ?? ????? 8003
start "Cart Service" cmd /k "uvicorn services.cart.main:app --host 0.0.0.0 --port 8003 --reload"

REM ????????? ????????
timeout /t 2 /nobreak > nul

REM ?????? ??????? "??????" ?? ????? 8004
start "Orders Service" cmd /k "uvicorn services.orders.main:app --host 0.0.0.0 --port 8004 --reload"

REM ????????? ????????
timeout /t 2 /nobreak > nul

REM ?????? ??????? "???????????" ?? ????? 8005
start "Recommender Service" cmd /k "uvicorn services.recommender.main:app --host 0.0.0.0 --port 8005 --reload"

ECHO.
ECHO ??? ??????? ???????? ? ????????? ?????.
