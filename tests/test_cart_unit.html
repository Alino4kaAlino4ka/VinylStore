<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit —Ç–µ—Å—Ç—ã –∫–æ—Ä–∑–∏–Ω—ã</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #1e1e1e;
            color: #ffffff;
        }
        
        .console {
            background-color: #000000;
            border: 1px solid #333;
            border-radius: 5px;
            padding: 20px;
            margin: 20px 0;
            min-height: 400px;
            overflow-y: auto;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
        }
        
        button:hover {
            background-color: #0056b3;
        }
        
        .clear-btn {
            background-color: #dc3545;
        }
        
        .clear-btn:hover {
            background-color: #c82333;
        }
        
        h1 {
            text-align: center;
            color: #007bff;
        }
        
        .info {
            background-color: #2d3748;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #007bff;
        }
        
        .warning {
            background-color: #744210;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #ffc107;
        }
    </style>
</head>
<body>
    <h1>üß™ Unit —Ç–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –∫–æ—Ä–∑–∏–Ω—ã</h1>
    
    <div class="info">
        <strong>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong> –≠—Ç–æ—Ç —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ unit-—Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –∫–æ—Ä–∑–∏–Ω—ã.
        –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏ –Ω–∏–∂–µ.
    </div>
    
    <div class="warning">
        <strong>–í–∞–∂–Ω–æ:</strong> –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª <code>src/scripts/script.js</code> –ø–æ–¥–∫–ª—é—á–µ–Ω –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä–∑–∏–Ω—ã.
    </div>
    
    <div class="controls">
        <button onclick="runTests()">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã</button>
        <button onclick="clearConsole()" class="clear-btn">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å</button>
    </div>
    
    <div class="console" id="console">
        <div style="color: #888;">–ö–æ–Ω—Å–æ–ª—å –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã" –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.</div>
    </div>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∫–æ—Ä–∑–∏–Ω—ã -->
    <script src="src/scripts/script.js"></script>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º unit-—Ç–µ—Å—Ç—ã -->
    <script src="tests/test_cart_unit.js"></script>
    
    <script>
        // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º console.log –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –Ω–∞—à–µ–º –∫–æ–Ω—Å–æ–ª—å–Ω–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ
        const originalConsoleLog = console.log;
        const consoleElement = document.getElementById('console');
        
        console.log = function(...args) {
            // –í—ã–∑—ã–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π console.log
            originalConsoleLog.apply(console, args);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—à –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
            const message = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ');
            
            const logElement = document.createElement('div');
            logElement.textContent = message;
            logElement.style.marginBottom = '5px';
            
            // –¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
            if (message.includes('‚úÖ')) {
                logElement.style.color = '#28a745';
            } else if (message.includes('‚ùå')) {
                logElement.style.color = '#dc3545';
            } else if (message.includes('üìä') || message.includes('üìà')) {
                logElement.style.color = '#007bff';
            } else if (message.includes('üß™')) {
                logElement.style.color = '#ffc107';
            }
            
            consoleElement.appendChild(logElement);
            consoleElement.scrollTop = consoleElement.scrollHeight;
        };
        
        // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º console.error
        const originalConsoleError = console.error;
        console.error = function(...args) {
            originalConsoleError.apply(console, args);
            
            const message = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ');
            
            const errorElement = document.createElement('div');
            errorElement.textContent = 'ERROR: ' + message;
            errorElement.style.color = '#dc3545';
            errorElement.style.marginBottom = '5px';
            
            consoleElement.appendChild(errorElement);
            consoleElement.scrollTop = consoleElement.scrollHeight;
        };
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤
        function runTests() {
            console.log('üöÄ –ó–∞–ø—É—Å–∫ unit-—Ç–µ—Å—Ç–æ–≤...');
            console.log('='.repeat(50));
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä–∑–∏–Ω—ã –¥–æ—Å—Ç—É–ø–Ω—ã
            if (typeof getCart !== 'function') {
                console.error('‚ùå –§—É–Ω–∫—Ü–∏—è getCart –Ω–µ –Ω–∞–π–¥–µ–Ω–∞! –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ script.js –ø–æ–¥–∫–ª—é—á–µ–Ω.');
                return;
            }
            
            if (typeof saveCart !== 'function') {
                console.error('‚ùå –§—É–Ω–∫—Ü–∏—è saveCart –Ω–µ –Ω–∞–π–¥–µ–Ω–∞! –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ script.js –ø–æ–¥–∫–ª—é—á–µ–Ω.');
                return;
            }
            
            if (typeof addToCart !== 'function') {
                console.error('‚ùå –§—É–Ω–∫—Ü–∏—è addToCart –Ω–µ –Ω–∞–π–¥–µ–Ω–∞! –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ script.js –ø–æ–¥–∫–ª—é—á–µ–Ω.');
                return;
            }
            
            if (typeof updateCartCount !== 'function') {
                console.error('‚ùå –§—É–Ω–∫—Ü–∏—è updateCartCount –Ω–µ –Ω–∞–π–¥–µ–Ω–∞! –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ script.js –ø–æ–¥–∫–ª—é—á–µ–Ω.');
                return;
            }
            
            console.log('‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä–∑–∏–Ω—ã –Ω–∞–π–¥–µ–Ω—ã');
            console.log('');
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã
            testSuite.runAllTests().then(results => {
                console.log('');
                console.log('üéâ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                const passedTests = results.filter(r => r.status === 'PASSED');
                const failedTests = results.filter(r => r.status === 'FAILED');
                
                if (failedTests.length > 0) {
                    console.log('');
                    console.log('‚ùå –ü—Ä–æ–≤–∞–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:');
                    failedTests.forEach(test => {
                        console.log(`  - ${test.name}: ${test.error}`);
                    });
                }
                
                if (passedTests.length > 0) {
                    console.log('');
                    console.log('‚úÖ –ü—Ä–æ–π–¥–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:');
                    passedTests.forEach(test => {
                        console.log(`  - ${test.name}`);
                    });
                }
            }).catch(error => {
                console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–æ–≤:', error);
            });
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–æ–Ω—Å–æ–ª–∏
        function clearConsole() {
            consoleElement.innerHTML = '<div style="color: #888;">–ö–æ–Ω—Å–æ–ª—å –æ—á–∏—â–µ–Ω–∞.</div>';
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é...');
            
            const requiredFunctions = ['getCart', 'saveCart', 'addToCart', 'updateCartCount'];
            const missingFunctions = requiredFunctions.filter(func => typeof window[func] !== 'function');
            
            if (missingFunctions.length === 0) {
                console.log('‚úÖ –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞–π–¥–µ–Ω—ã. –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!');
            } else {
                console.log('‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ñ—É–Ω–∫—Ü–∏–∏:', missingFunctions.join(', '));
                console.log('–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª src/scripts/script.js –ø–æ–¥–∫–ª—é—á–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.');
            }
        });
    </script>
</body>
</html>
