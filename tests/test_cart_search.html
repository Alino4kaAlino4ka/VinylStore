<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –ø–æ–∏—Å–∫–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ - –ê—É–¥–∏—Ç–µ—Ä–∏—è</title>
    <link rel="stylesheet" href="src/styles/style.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 40px auto;
            padding: 0 20px;
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .test-instructions {
            background-color: #1A1B20;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .test-instructions h3 {
            color: #FF9900;
            margin-bottom: 15px;
        }
        
        .test-instructions ol {
            color: #EAEAEA;
            line-height: 1.6;
        }
        
        .test-instructions li {
            margin-bottom: 8px;
        }
        
        .test-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        .test-btn {
            background: linear-gradient(135deg, #FF9900 0%, #e68900 100%);
            color: #0F1014;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .test-btn:hover {
            background: linear-gradient(135deg, #e68900 0%, #d17a00 100%);
            transform: translateY(-2px);
        }
        
        .test-results {
            background-color: #1A1B20;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .test-results h4 {
            color: #FF9900;
            margin-bottom: 15px;
        }
        
        .test-results p {
            color: #EAEAEA;
            margin-bottom: 10px;
        }
        
        .success {
            color: #28a745;
        }
        
        .error {
            color: #dc3545;
        }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="logo">–ê–£–î–ò–¢–ï–†–ò–Ø</div>
        <nav>
            <a href="src/index.html">–ö–∞—Ç–∞–ª–æ–≥</a>
            <a href="src/cart.html" class="active">–ö–æ—Ä–∑–∏–Ω–∞ (<span id="cart-count">0</span>)</a>
        </nav>
        <div class="user-actions">
            <div class="search-dropdown">
                <button class="search-icon-btn" id="header-search-btn" title="–ü–æ–∏—Å–∫">üîç</button>
                <div class="search-dropdown-content" id="search-dropdown-content">
                    <div class="search-dropdown-header">
                        <span class="search-dropdown-title">–ü–æ–∏—Å–∫ –ø–æ –∞—É–¥–∏–æ–∫–Ω–∏–≥–∞–º –≤ –∫–æ—Ä–∑–∏–Ω–µ</span>
                        <button class="search-dropdown-close" id="search-dropdown-close">‚úï</button>
                    </div>
                    <div class="search-dropdown-body">
                        <input type="text" id="dropdown-search-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, –∞–≤—Ç–æ—Ä–∞ –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ..." class="dropdown-search-input">
                        <div class="search-dropdown-filters">
                            <select id="dropdown-genre-filter" class="dropdown-filter">
                                <option value="">–í—Å–µ –∂–∞–Ω—Ä—ã</option>
                            </select>
                            <select id="dropdown-author-filter" class="dropdown-filter">
                                <option value="">–í—Å–µ –∞–≤—Ç–æ—Ä—ã</option>
                            </select>
                        </div>
                        <div class="search-dropdown-actions">
                            <button class="dropdown-search-btn" id="dropdown-search-btn">–ù–∞–π—Ç–∏</button>
                            <button class="dropdown-clear-btn" id="dropdown-clear-btn">–û—á–∏—Å—Ç–∏—Ç—å</button>
                        </div>
                    </div>
                </div>
            </div>
            <a href="src/login.html" class="login-btn" id="login-link">–í–æ–π—Ç–∏</a>
        </div>
    </header>

    <main class="test-container">
        <div class="test-header">
            <h1>–¢–µ—Å—Ç –ø–æ–∏—Å–∫–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ</h1>
            <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ</p>
        </div>

        <div class="test-instructions">
            <h3>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:</h3>
            <ol>
                <li>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã" –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã</li>
                <li>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –ø–æ–∏—Å–∫–∞ (üîç) –≤ —Ö–µ–¥–µ—Ä–µ</li>
                <li>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∫–Ω–∏–≥–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ì–∞—Ä—Ä–∏ –ü–æ—Ç—Ç–µ—Ä")</li>
                <li>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∏—Å–∫ –ø–æ –∞–≤—Ç–æ—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–†–æ—É–ª–∏–Ω–≥")</li>
                <li>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä –ø–æ –∂–∞–Ω—Ä—É</li>
                <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–Ω–æ–ø–∫—É "–û—á–∏—Å—Ç–∏—Ç—å" –¥–ª—è —Å–±—Ä–æ—Å–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤</li>
            </ol>
        </div>

        <div class="test-buttons">
            <button class="test-btn" onclick="addTestItems()">–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã</button>
            <button class="test-btn" onclick="clearTestCart()">–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
            <button class="test-btn" onclick="runSearchTests()">–ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã</button>
        </div>

        <div id="cart-items" class="cart-items">
            <div class="empty-cart">
                <h2>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h2>
                <p>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–∏—Å–∫–∞</p>
            </div>
        </div>

        <div id="test-results" class="test-results" style="display: none;">
            <h4>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</h4>
            <div id="test-output"></div>
        </div>
    </main>

    <footer class="site-footer-main">
        <div class="footer-content">
            <div class="footer-logo">–ê—É–¥–∏—Ç–µ—Ä–∏—è</div>
            <div class="footer-links">
                <div class="footer-column">
                    <h3>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
                    <ul>
                        <li><a href="src/cart.html">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∫–æ—Ä–∑–∏–Ω–µ</a></li>
                        <li><a href="src/index.html">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∫–∞—Ç–∞–ª–æ–≥—É</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <script src="src/scripts/cart.js"></script>
    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
        function addTestItems() {
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            const testItems = ['main-book', '1', '2', '3', '14', '15', '16'];
            
            testItems.forEach(itemId => {
                if (typeof addToCartWithQuantity === 'function') {
                    addToCartWithQuantity(itemId);
                }
            });
            
            // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
            setTimeout(() => {
                loadCart();
                updateCartCount();
            }, 100);
            
            console.log('–¢–µ—Å—Ç–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∫–æ—Ä–∑–∏–Ω—É');
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã
        function clearTestCart() {
            if (typeof clearCart === 'function') {
                clearCart();
                loadCart();
                updateCartCount();
            }
            console.log('–ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞');
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤
        function runSearchTests() {
            const resultsDiv = document.getElementById('test-results');
            const outputDiv = document.getElementById('test-output');
            
            resultsDiv.style.display = 'block';
            outputDiv.innerHTML = '<p>–ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤...</p>';
            
            let testResults = [];
            
            // –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–Ω–æ–ø–∫–∏ –ø–æ–∏—Å–∫–∞
            const searchBtn = document.getElementById('header-search-btn');
            if (searchBtn) {
                testResults.push('<p class="success">‚úì –ö–Ω–æ–ø–∫–∞ –ø–æ–∏—Å–∫–∞ –Ω–∞–π–¥–µ–Ω–∞</p>');
            } else {
                testResults.push('<p class="error">‚úó –ö–Ω–æ–ø–∫–∞ –ø–æ–∏—Å–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</p>');
            }
            
            // –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ –º–µ–Ω—é
            const dropdown = document.getElementById('search-dropdown-content');
            if (dropdown) {
                testResults.push('<p class="success">‚úì –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é –ø–æ–∏—Å–∫–∞ –Ω–∞–π–¥–µ–Ω–æ</p>');
            } else {
                testResults.push('<p class="error">‚úó –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é –ø–æ–∏—Å–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>');
            }
            
            // –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–µ–π –ø–æ–∏—Å–∫–∞
            const searchInput = document.getElementById('dropdown-search-input');
            const genreFilter = document.getElementById('dropdown-genre-filter');
            const authorFilter = document.getElementById('dropdown-author-filter');
            
            if (searchInput) {
                testResults.push('<p class="success">‚úì –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞ –Ω–∞–π–¥–µ–Ω–æ</p>');
            } else {
                testResults.push('<p class="error">‚úó –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>');
            }
            
            if (genreFilter) {
                testResults.push('<p class="success">‚úì –§–∏–ª—å—Ç—Ä –ø–æ –∂–∞–Ω—Ä—É –Ω–∞–π–¥–µ–Ω</p>');
            } else {
                testResults.push('<p class="error">‚úó –§–∏–ª—å—Ç—Ä –ø–æ –∂–∞–Ω—Ä—É –Ω–µ –Ω–∞–π–¥–µ–Ω</p>');
            }
            
            if (authorFilter) {
                testResults.push('<p class="success">‚úì –§–∏–ª—å—Ç—Ä –ø–æ –∞–≤—Ç–æ—Ä—É –Ω–∞–π–¥–µ–Ω</p>');
            } else {
                testResults.push('<p class="error">‚úó –§–∏–ª—å—Ç—Ä –ø–æ –∞–≤—Ç–æ—Ä—É –Ω–µ –Ω–∞–π–¥–µ–Ω</p>');
            }
            
            // –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π –ø–æ–∏—Å–∫–∞
            if (typeof setupCartSearch === 'function') {
                testResults.push('<p class="success">‚úì –§—É–Ω–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–∏—Å–∫–∞ –Ω–∞–π–¥–µ–Ω–∞</p>');
            } else {
                testResults.push('<p class="error">‚úó –§—É–Ω–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–∏—Å–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</p>');
            }
            
            if (typeof filterCartItems === 'function') {
                testResults.push('<p class="success">‚úì –§—É–Ω–∫—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞–π–¥–µ–Ω–∞</p>');
            } else {
                testResults.push('<p class="error">‚úó –§—É–Ω–∫—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</p>');
            }
            
            if (typeof clearCartSearch === 'function') {
                testResults.push('<p class="success">‚úì –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –ø–æ–∏—Å–∫–∞ –Ω–∞–π–¥–µ–Ω–∞</p>');
            } else {
                testResults.push('<p class="error">‚úó –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –ø–æ–∏—Å–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</p>');
            }
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            outputDiv.innerHTML = testResults.join('');
            
            // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —É—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã
            const successCount = testResults.filter(result => result.includes('success')).length;
            const totalCount = testResults.length;
            
            outputDiv.innerHTML += `<p><strong>–†–µ–∑—É–ª—å—Ç–∞—Ç: ${successCount}/${totalCount} —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ</strong></p>`;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–æ–∏—Å–∫ –≤ –∫–æ—Ä–∑–∏–Ω–µ
            if (typeof setupCartSearch === 'function') {
                setupCartSearch();
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –∫–æ—Ä–∑–∏–Ω—ã
            if (typeof updateCartCount === 'function') {
                updateCartCount();
            }
        });
    </script>
</body>
</html>
