<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit —Ç–µ—Å—Ç—ã –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ - –ê—É–¥–∏—Ç–µ—Ä–∏—è</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #0F1014;
            color: #EAEAEA;
        }
        
        .test-container {
            background-color: #1A1B20;
            padding: 20px;
            border-radius: 8px;
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #FF9900;
        }
        
        .test-header h1 {
            color: #FF9900;
            font-size: 24px;
            margin: 0;
        }
        
        .test-group {
            background-color: #2A2B30;
            padding: 15px;
            margin: 15px 0;
            border-radius: 6px;
            border-left: 4px solid #FF9900;
        }
        
        .test-group h3 {
            color: #FF9900;
            margin-top: 0;
            margin-bottom: 10px;
        }
        
        .test-case {
            background-color: #3A3B40;
            padding: 10px;
            margin: 8px 0;
            border-radius: 4px;
            border-left: 3px solid #6c757d;
        }
        
        .test-case.passed {
            border-left-color: #28a745;
            background-color: #1e3a1e;
        }
        
        .test-case.failed {
            border-left-color: #dc3545;
            background-color: #3a1e1e;
        }
        
        .test-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .test-result {
            font-size: 14px;
        }
        
        .test-result.success {
            color: #28a745;
        }
        
        .test-result.error {
            color: #dc3545;
        }
        
        button {
            background-color: #FF9900;
            color: #0F1014;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-weight: bold;
        }
        
        button:hover {
            background-color: #e68900;
        }
        
        .run-tests-btn {
            background-color: #28a745;
            font-size: 16px;
            padding: 12px 25px;
        }
        
        .run-tests-btn:hover {
            background-color: #218838;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 15px;
            background-color: #2A2B30;
            border-radius: 8px;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-number {
            font-size: 20px;
            font-weight: bold;
            color: #FF9900;
        }
        
        .stat-label {
            font-size: 12px;
            color: #ADADAD;
        }
        
        .test-data {
            background-color: #1A1B20;
            padding: 8px;
            border-radius: 4px;
            margin: 5px 0;
            font-family: monospace;
            font-size: 11px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>üî¨ Unit —Ç–µ—Å—Ç—ã –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏</h1>
            <p>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ –º–µ—Ç–æ–¥–æ–≤</p>
        </div>
        
        <div class="stats">
            <div class="stat">
                <div class="stat-number" id="total-unit-tests">0</div>
                <div class="stat-label">–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="passed-unit-tests">0</div>
                <div class="stat-label">–ü—Ä–æ–π–¥–µ–Ω–æ</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="failed-unit-tests">0</div>
                <div class="stat-label">–ü—Ä–æ–≤–∞–ª–µ–Ω–æ</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="unit-success-rate">0%</div>
                <div class="stat-label">–£—Å–ø–µ—à–Ω–æ—Å—Ç—å</div>
            </div>
        </div>
        
        <div style="text-align: center; margin: 20px 0;">
            <button class="run-tests-btn" onclick="runUnitTests()">üß™ –ó–∞–ø—É—Å—Ç–∏—Ç—å Unit —Ç–µ—Å—Ç—ã</button>
            <button onclick="clearUnitResults()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
        </div>
        
        <div id="test-results"></div>
    </div>

    <script>
        let unitTestResults = {
            total: 0,
            passed: 0,
            failed: 0
        };

        // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        const testProducts = [
            { id: 1, title: "–ö–Ω–∏–≥–∞ 1", author_id: 1, description: "–û–ø–∏—Å–∞–Ω–∏–µ 1", price: 100 },
            { id: 2, title: "–ö–Ω–∏–≥–∞ 2", author_id: 2, description: "–û–ø–∏—Å–∞–Ω–∏–µ 2", price: 200 }
        ];

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–ª—É—á–∞—è
        function createTestCase(name, testFunction) {
            const testDiv = document.createElement('div');
            testDiv.className = 'test-case';
            testDiv.innerHTML = `
                <div class="test-name">${name}</div>
                <div class="test-result" id="unit-result-${unitTestResults.total}">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
            `;
            
            const resultDiv = testDiv.querySelector('.test-result');
            
            return {
                element: testDiv,
                resultDiv: resultDiv,
                run: async () => {
                    try {
                        const result = await testFunction();
                        if (result.success) {
                            testDiv.className = 'test-case passed';
                            resultDiv.className = 'test-result success';
                            resultDiv.textContent = result.message;
                            unitTestResults.passed++;
                        } else {
                            testDiv.className = 'test-case failed';
                            resultDiv.className = 'test-result error';
                            resultDiv.textContent = result.message;
                            unitTestResults.failed++;
                        }
                    } catch (error) {
                        testDiv.className = 'test-case failed';
                        resultDiv.className = 'test-result error';
                        resultDiv.textContent = `–û—à–∏–±–∫–∞: ${error.message}`;
                        unitTestResults.failed++;
                    }
                    
                    unitTestResults.total++;
                    updateUnitStats();
                }
            };
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ unit —Ç–µ—Å—Ç–æ–≤
        function updateUnitStats() {
            document.getElementById('total-unit-tests').textContent = unitTestResults.total;
            document.getElementById('passed-unit-tests').textContent = unitTestResults.passed;
            document.getElementById('failed-unit-tests').textContent = unitTestResults.failed;
            
            const successRate = unitTestResults.total > 0 ? 
                Math.round((unitTestResults.passed / unitTestResults.total) * 100) : 0;
            document.getElementById('unit-success-rate').textContent = successRate + '%';
        }

        // –¢–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
        function createDataFunctionTests() {
            const container = document.createElement('div');
            container.className = 'test-group';
            container.innerHTML = '<h3>üìä –¢–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π –¥–∞–Ω–Ω—ã—Ö</h3>';
            
            const tests = [
                createTestCase('–¢–µ—Å—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤', async () => {
                    const testData = [...testProducts];
                    localStorage.setItem('admin_products', JSON.stringify(testData));
                    
                    const saved = localStorage.getItem('admin_products');
                    if (saved) {
                        const parsed = JSON.parse(saved);
                        if (parsed.length === testData.length) {
                            return { success: true, message: '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ' };
                        }
                    }
                    return { success: false, message: '–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è' };
                }),
                
                createTestCase('–¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤', async () => {
                    localStorage.setItem('admin_products', JSON.stringify(testProducts));
                    
                    const loaded = localStorage.getItem('admin_products');
                    const products = JSON.parse(loaded);
                    
                    if (Array.isArray(products) && products.length > 0) {
                        return { success: true, message: `–ó–∞–≥—Ä—É–∂–µ–Ω–æ ${products.length} —Ç–æ–≤–∞—Ä–æ–≤` };
                    }
                    return { success: false, message: '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏' };
                }),
                
                createTestCase('–¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ID', async () => {
                    const products = [...testProducts];
                    const maxId = Math.max(...products.map(p => p.id));
                    const newId = maxId + 1;
                    
                    if (newId > maxId && !products.find(p => p.id === newId)) {
                        return { success: true, message: `–ù–æ–≤—ã–π ID: ${newId}` };
                    }
                    return { success: false, message: '–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ID' };
                }),
                
                createTestCase('–¢–µ—Å—Ç –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–∞ –ø–æ ID', async () => {
                    const products = [...testProducts];
                    const foundProduct = products.find(p => p.id === 1);
                    
                    if (foundProduct && foundProduct.title === "–ö–Ω–∏–≥–∞ 1") {
                        return { success: true, message: '–ü–æ–∏—Å–∫ –ø–æ ID —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                    }
                    return { success: false, message: '–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞' };
                }),
                
                createTestCase('–¢–µ—Å—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤', async () => {
                    const products = [...testProducts];
                    const filtered = products.filter(p => p.price > 150);
                    
                    if (filtered.length === 1 && filtered[0].id === 2) {
                        return { success: true, message: '–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ' };
                    }
                    return { success: false, message: '–û—à–∏–±–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏' };
                })
            ];
            
            tests.forEach(test => {
                container.appendChild(test.element);
                test.run();
            });
            
            return container;
        }

        // –¢–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏
        function createValidationTests() {
            const container = document.createElement('div');
            container.className = 'test-group';
            container.innerHTML = '<h3>‚úÖ –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏</h3>';
            
            const tests = [
                createTestCase('–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞–∑–≤–∞–Ω–∏—è', async () => {
                    const validTitle = "–í–∞–ª–∏–¥–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ";
                    const invalidTitle = "";
                    
                    if (validTitle.length > 0 && invalidTitle.length === 0) {
                        return { success: true, message: '–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                    }
                    return { success: false, message: '–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞–∑–≤–∞–Ω–∏—è' };
                }),
                
                createTestCase('–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ü–µ–Ω—ã', async () => {
                    const validPrice = 100.50;
                    const invalidPrice = -10;
                    
                    if (validPrice > 0 && invalidPrice <= 0) {
                        return { success: true, message: '–í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–Ω—ã —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                    }
                    return { success: false, message: '–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ü–µ–Ω—ã' };
                }),
                
                createTestCase('–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ ID –∞–≤—Ç–æ—Ä–∞', async () => {
                    const validAuthorId = 1;
                    const invalidAuthorId = 0;
                    
                    if (validAuthorId > 0 && invalidAuthorId <= 0) {
                        return { success: true, message: '–í–∞–ª–∏–¥–∞—Ü–∏—è ID –∞–≤—Ç–æ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                    }
                    return { success: false, message: '–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ ID –∞–≤—Ç–æ—Ä–∞' };
                }),
                
                createTestCase('–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ–ø–∏—Å–∞–Ω–∏—è', async () => {
                    const validDescription = "–≠—Ç–æ –≤–∞–ª–∏–¥–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ";
                    const invalidDescription = "";
                    
                    if (validDescription.length > 0 && invalidDescription.length === 0) {
                        return { success: true, message: '–í–∞–ª–∏–¥–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                    }
                    return { success: false, message: '–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ–ø–∏—Å–∞–Ω–∏—è' };
                }),
                
                createTestCase('–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ JSON', async () => {
                    const validJson = '{"id": 1, "title": "Test"}';
                    const invalidJson = '{"id": 1, "title":}';
                    
                    try {
                        JSON.parse(validJson);
                        JSON.parse(invalidJson);
                        return { success: false, message: 'JSON –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                    } catch (error) {
                        return { success: true, message: 'JSON –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                    }
                })
            ];
            
            tests.forEach(test => {
                container.appendChild(test.element);
                test.run();
            });
            
            return container;
        }

        // –¢–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        function createFormattingTests() {
            const container = document.createElement('div');
            container.className = 'test-group';
            container.innerHTML = '<h3>üé® –¢–µ—Å—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h3>';
            
            const tests = [
                createTestCase('–¢–µ—Å—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–Ω—ã', async () => {
                    const price = 29.99;
                    const formatted = price.toFixed(2) + ' ‚ÇΩ';
                    
                    if (formatted === '29.99 ‚ÇΩ') {
                        return { success: true, message: '–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                    }
                    return { success: false, message: '–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–Ω—ã' };
                }),
                
                createTestCase('–¢–µ—Å—Ç –æ–±—Ä–µ–∑–∫–∏ —Ç–µ–∫—Å—Ç–∞', async () => {
                    const longText = "–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –æ–±—Ä–µ–∑–∞—Ç—å";
                    const shortText = longText.substring(0, 20) + (longText.length > 20 ? '...' : '');
                    
                    if (shortText.length <= 23 && shortText.endsWith('...')) {
                        return { success: true, message: '–û–±—Ä–µ–∑–∫–∞ —Ç–µ–∫—Å—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                    }
                    return { success: false, message: '–û—à–∏–±–∫–∞ –æ–±—Ä–µ–∑–∫–∏ —Ç–µ–∫—Å—Ç–∞' };
                }),
                
                createTestCase('–¢–µ—Å—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–∏–ø–æ–≤', async () => {
                    const stringNumber = "123";
                    const number = parseInt(stringNumber);
                    const floatNumber = parseFloat("123.45");
                    
                    if (number === 123 && floatNumber === 123.45) {
                        return { success: true, message: '–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                    }
                    return { success: false, message: '–û—à–∏–±–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–∏–ø–æ–≤' };
                }),
                
                createTestCase('–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∞—Å—Å–∏–≤–∞', async () => {
                    const array = [1, 2, 3];
                    const notArray = "not array";
                    
                    if (Array.isArray(array) && !Array.isArray(notArray)) {
                        return { success: true, message: '–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Å—Å–∏–≤–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                    }
                    return { success: false, message: '–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∞—Å—Å–∏–≤–∞' };
                })
            ];
            
            tests.forEach(test => {
                container.appendChild(test.element);
                test.run();
            });
            
            return container;
        }

        // –¢–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
        function createErrorHandlingTests() {
            const container = document.createElement('div');
            container.className = 'test-group';
            container.innerHTML = '<h3>‚ö†Ô∏è –¢–µ—Å—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫</h3>';
            
            const tests = [
                createTestCase('–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö', async () => {
                    const nonExistentData = localStorage.getItem('non_existent_key');
                    
                    if (nonExistentData === null) {
                        return { success: true, message: '–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                    }
                    return { success: false, message: '–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö' };
                }),
                
                createTestCase('–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ JSON', async () => {
                    try {
                        JSON.parse('invalid json');
                        return { success: false, message: '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω' };
                    } catch (error) {
                        return { success: true, message: '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON –æ–±—Ä–∞–±–æ—Ç–∞–Ω' };
                    }
                }),
                
                createTestCase('–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–µ–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–ª—å', async () => {
                    try {
                        const result = 10 / 0;
                        if (result === Infinity) {
                            return { success: true, message: '–î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ' };
                        }
                    } catch (error) {
                        return { success: false, message: '–î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ' };
                    }
                }),
                
                createTestCase('–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π', async () => {
                    const undefinedValue = undefined;
                    const nullValue = null;
                    
                    if (undefinedValue === undefined && nullValue === null) {
                        return { success: true, message: '–û–±—Ä–∞–±–æ—Ç–∫–∞ undefined/null —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                    }
                    return { success: false, message: '–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ undefined/null' };
                }),
                
                createTestCase('–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫', async () => {
                    const emptyString = "";
                    const whitespaceString = "   ";
                    
                    if (emptyString.length === 0 && whitespaceString.trim().length === 0) {
                        return { success: true, message: '–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                    }
                    return { success: false, message: '–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫' };
                })
            ];
            
            tests.forEach(test => {
                container.appendChild(test.element);
                test.run();
            });
            
            return container;
        }

        // –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        function createPerformanceTests() {
            const container = document.createElement('div');
            container.className = 'test-group';
            container.innerHTML = '<h3>‚ö° –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h3>';
            
            const tests = [
                createTestCase('–¢–µ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞ –≤ –º–∞—Å—Å–∏–≤–µ', async () => {
                    const largeArray = Array.from({length: 1000}, (_, i) => ({id: i, name: `Item ${i}`}));
                    
                    const startTime = performance.now();
                    const found = largeArray.find(item => item.id === 500);
                    const endTime = performance.now();
                    
                    const duration = endTime - startTime;
                    
                    if (found && duration < 10) { // –ú–µ–Ω–µ–µ 10–º—Å
                        return { success: true, message: `–ü–æ–∏—Å–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω –∑–∞ ${duration.toFixed(2)}–º—Å` };
                    }
                    return { success: false, message: '–ü–æ–∏—Å–∫ —Å–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω—ã–π' };
                }),
                
                createTestCase('–¢–µ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ localStorage', async () => {
                    const testData = Array.from({length: 100}, (_, i) => ({id: i, data: `test${i}`}));
                    
                    const startTime = performance.now();
                    localStorage.setItem('perf_test', JSON.stringify(testData));
                    const endTime = performance.now();
                    
                    const duration = endTime - startTime;
                    
                    if (duration < 50) { // –ú–µ–Ω–µ–µ 50–º—Å
                        return { success: true, message: `–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞ ${duration.toFixed(2)}–º—Å` };
                    }
                    return { success: false, message: '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω–æ–µ' };
                }),
                
                createTestCase('–¢–µ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ localStorage', async () => {
                    localStorage.setItem('perf_test', JSON.stringify(Array.from({length: 100}, (_, i) => ({id: i}))));
                    
                    const startTime = performance.now();
                    const data = JSON.parse(localStorage.getItem('perf_test'));
                    const endTime = performance.now();
                    
                    const duration = endTime - startTime;
                    
                    if (data && duration < 30) { // –ú–µ–Ω–µ–µ 30–º—Å
                        return { success: true, message: `–ó–∞–≥—Ä—É–∑–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∑–∞ ${duration.toFixed(2)}–º—Å` };
                    }
                    return { success: false, message: '–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω–∞—è' };
                })
            ];
            
            tests.forEach(test => {
                container.appendChild(test.element);
                test.run();
            });
            
            return container;
        }

        // –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö unit —Ç–µ—Å—Ç–æ–≤
        async function runUnitTests() {
            unitTestResults = { total: 0, passed: 0, failed: 0 };
            
            const resultsContainer = document.getElementById('test-results');
            resultsContainer.innerHTML = '';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≥—Ä—É–ø–ø—ã —Ç–µ—Å—Ç–æ–≤
            resultsContainer.appendChild(createDataFunctionTests());
            await new Promise(resolve => setTimeout(resolve, 500));
            
            resultsContainer.appendChild(createValidationTests());
            await new Promise(resolve => setTimeout(resolve, 500));
            
            resultsContainer.appendChild(createFormattingTests());
            await new Promise(resolve => setTimeout(resolve, 500));
            
            resultsContainer.appendChild(createErrorHandlingTests());
            await new Promise(resolve => setTimeout(resolve, 500));
            
            resultsContainer.appendChild(createPerformanceTests());
        }

        // –û—á–∏—Å—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ unit —Ç–µ—Å—Ç–æ–≤
        function clearUnitResults() {
            document.getElementById('test-results').innerHTML = '';
            unitTestResults = { total: 0, passed: 0, failed: 0 };
            updateUnitStats();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            updateUnitStats();
        });
    </script>
</body>
</html>
