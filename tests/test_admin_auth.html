<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤</title>
    <link rel="stylesheet" href="src/styles/style.css">
    <style>
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #0F1014;
            color: #EAEAEA;
            font-family: 'Inter', sans-serif;
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: #1A1B20;
            border-radius: 8px;
            border: 1px solid #2A2B30;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background-color: #1A1B20;
            border-radius: 8px;
            border: 1px solid #2A2B30;
        }
        
        .test-section h2 {
            color: #FF9900;
            margin-bottom: 15px;
        }
        
        .test-button {
            background-color: #FF9900;
            color: #0F1014;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-weight: 600;
            transition: background-color 0.3s ease;
        }
        
        .test-button:hover {
            background-color: #E68900;
        }
        
        .test-button:disabled {
            background-color: #666;
            cursor: not-allowed;
        }
        
        .test-results {
            margin-top: 20px;
            padding: 15px;
            background-color: #0F1014;
            border-radius: 4px;
            border: 1px solid #2A2B30;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .test-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            padding: 15px;
            background-color: #0F1014;
            border-radius: 4px;
            border: 1px solid #2A2B30;
            text-align: center;
        }
        
        .stat-card h3 {
            margin: 0 0 10px 0;
            color: #FF9900;
        }
        
        .stat-card .stat-value {
            font-size: 24px;
            font-weight: bold;
        }
        
        .stat-card.passed .stat-value {
            color: #4CAF50;
        }
        
        .stat-card.failed .stat-value {
            color: #F44336;
        }
        
        .stat-card.total .stat-value {
            color: #2196F3;
        }
        
        .test-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            margin-bottom: 5px;
            color: #EAEAEA;
            font-weight: 500;
        }
        
        .form-group input {
            padding: 8px;
            background-color: #0F1014;
            border: 1px solid #2A2B30;
            border-radius: 4px;
            color: #EAEAEA;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #FF9900;
        }
        
        .error-message {
            background-color: #F44336;
            color: white;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 15px;
            display: none;
        }
        
        .success-message {
            background-color: #4CAF50;
            color: white;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 15px;
            display: none;
        }
        
        .clear-button {
            background-color: #F44336;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-weight: 600;
        }
        
        .clear-button:hover {
            background-color: #D32F2F;
        }
        
        .test-links {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .test-links a {
            color: #FF9900;
            text-decoration: none;
            padding: 8px 16px;
            border: 1px solid #FF9900;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        
        .test-links a:hover {
            background-color: #FF9900;
            color: #0F1014;
        }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="logo">–ê–£–î–ò–¢–ï–†–ò–Ø</div>
        <nav>
            <a href="src/index.html">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="src/admin/login.html">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
        </nav>
        <div class="user-actions">
            <a href="src/index.html">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —Å–∞–π—Ç</a>
        </div>
    </header>

    <main class="test-container">
        <div class="test-header">
            <h1>üß™ –¢–µ—Å—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤</h1>
            <p>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤</p>
        </div>

        <div class="test-links">
            <a href="src/admin/login.html" target="_blank">–°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞</a>
            <a href="src/admin/admin.html" target="_blank">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
            <a href="src/admin_config.py" target="_blank">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</a>
        </div>

        <div class="test-stats">
            <div class="stat-card passed">
                <h3>–ü—Ä–æ–π–¥–µ–Ω–æ</h3>
                <div class="stat-value" id="passed-count">0</div>
            </div>
            <div class="stat-card failed">
                <h3>–ü—Ä–æ–≤–∞–ª–µ–Ω–æ</h3>
                <div class="stat-value" id="failed-count">0</div>
            </div>
            <div class="stat-card total">
                <h3>–í—Å–µ–≥–æ</h3>
                <div class="stat-value" id="total-count">0</div>
            </div>
        </div>

        <div class="test-section">
            <h2>üîê –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</h2>
            
            <div id="error-message" class="error-message"></div>
            <div id="success-message" class="success-message"></div>
            
            <div class="test-form">
                <div class="form-group">
                    <label for="test-username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
                    <input type="text" id="test-username" value="admin">
                </div>
                <div class="form-group">
                    <label for="test-password">–ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="test-password" value="admin123">
                </div>
            </div>
            
            <button class="test-button" onclick="testCredentials()">–¢–µ—Å—Ç —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</button>
            <button class="test-button" onclick="testTokenGeneration()">–¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞</button>
            <button class="test-button" onclick="testTokenVerification()">–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞</button>
            <button class="test-button" onclick="testLogout()">–¢–µ—Å—Ç –≤—ã—Ö–æ–¥–∞</button>
            <button class="clear-button" onclick="clearResults()">–û—á–∏—Å—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
            
            <div id="auth-results" class="test-results"></div>
        </div>

        <div class="test-section">
            <h2>üß™ Unit-—Ç–µ—Å—Ç—ã JavaScript</h2>
            <button class="test-button" onclick="runJavaScriptTests()">–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ JS —Ç–µ—Å—Ç—ã</button>
            <button class="test-button" onclick="testLocalStorage()">–¢–µ—Å—Ç localStorage</button>
            <button class="test-button" onclick="testDOMElements()">–¢–µ—Å—Ç DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤</button>
            <button class="test-button" onclick="testEventHandlers()">–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π</button>
            <button class="test-button" onclick="testPerformance()">–¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</button>
            
            <div id="js-results" class="test-results"></div>
        </div>

        <div class="test-section">
            <h2>üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h2>
            <button class="test-button" onclick="testSecurityScenarios()">–¢–µ—Å—Ç —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</button>
            <button class="test-button" onclick="testEdgeCases()">–¢–µ—Å—Ç –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤</button>
            <button class="test-button" onclick="testInputValidation()">–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤–≤–æ–¥–∞</button>
            
            <div id="security-results" class="test-results"></div>
        </div>

        <div class="test-section">
            <h2>üìä –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã</h2>
            <button class="test-button" onclick="testFullAuthFlow()">–ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</button>
            <button class="test-button" onclick="testPageRedirects()">–¢–µ—Å—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π</button>
            <button class="test-button" onclick="testSessionManagement()">–¢–µ—Å—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–µ–π</button>
            
            <div id="integration-results" class="test-results"></div>
        </div>
    </main>

    <script src="tests/test_admin_auth_unit.js"></script>
    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        let testResults = {
            passed: 0,
            failed: 0,
            total: 0
        };

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats() {
            document.getElementById('passed-count').textContent = testResults.passed;
            document.getElementById('failed-count').textContent = testResults.failed;
            document.getElementById('total-count').textContent = testResults.total;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
        function showMessage(message, type = 'error') {
            const errorDiv = document.getElementById('error-message');
            const successDiv = document.getElementById('success-message');
            
            errorDiv.style.display = 'none';
            successDiv.style.display = 'none';
            
            if (type === 'error') {
                errorDiv.textContent = message;
                errorDiv.style.display = 'block';
            } else if (type === 'success') {
                successDiv.textContent = message;
                successDiv.style.display = 'block';
            }
            
            setTimeout(() => {
                errorDiv.style.display = 'none';
                successDiv.style.display = 'none';
            }, 5000);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –∫–æ–Ω—Å–æ–ª—å
        function addResult(containerId, message) {
            const container = document.getElementById(containerId);
            container.textContent += message + '\n';
            container.scrollTop = container.scrollHeight;
        }

        // –¢–µ—Å—Ç —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        function testCredentials() {
            const username = document.getElementById('test-username').value;
            const password = document.getElementById('test-password').value;
            
            addResult('auth-results', `üîê –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö: ${username}/${password}`);
            
            if (username === 'admin' && password === 'admin123') {
                addResult('auth-results', '‚úÖ –í–∞–ª–∏–¥–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ');
                testResults.passed++;
                showMessage('–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã!', 'success');
            } else {
                addResult('auth-results', '‚ùå –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ');
                testResults.failed++;
                showMessage('–ù–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!', 'error');
            }
            
            testResults.total++;
            updateStats();
        }

        // –¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞
        function testTokenGeneration() {
            addResult('auth-results', 'üîë –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞');
            
            const token = 'admin_token_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            localStorage.setItem('admin_token', token);
            
            if (token.startsWith('admin_token_') && token.length > 20) {
                addResult('auth-results', '‚úÖ –¢–æ–∫–µ–Ω —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω');
                addResult('auth-results', `   –¢–æ–∫–µ–Ω: ${token.substring(0, 30)}...`);
                testResults.passed++;
                showMessage('–¢–æ–∫–µ–Ω —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω!', 'success');
            } else {
                addResult('auth-results', '‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞');
                testResults.failed++;
                showMessage('–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞!', 'error');
            }
            
            testResults.total++;
            updateStats();
        }

        // –¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞
        function testTokenVerification() {
            addResult('auth-results', 'üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞');
            
            const token = localStorage.getItem('admin_token');
            
            if (token && token.startsWith('admin_token_') && token.length > 20) {
                addResult('auth-results', '‚úÖ –¢–æ–∫–µ–Ω –≤–∞–ª–∏–¥–µ–Ω');
                testResults.passed++;
                showMessage('–¢–æ–∫–µ–Ω –≤–∞–ª–∏–¥–µ–Ω!', 'success');
            } else {
                addResult('auth-results', '‚ùå –¢–æ–∫–µ–Ω –Ω–µ–≤–∞–ª–∏–¥–µ–Ω –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç');
                testResults.failed++;
                showMessage('–¢–æ–∫–µ–Ω –Ω–µ–≤–∞–ª–∏–¥–µ–Ω!', 'error');
            }
            
            testResults.total++;
            updateStats();
        }

        // –¢–µ—Å—Ç –≤—ã—Ö–æ–¥–∞
        function testLogout() {
            addResult('auth-results', 'üö™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã');
            
            localStorage.removeItem('admin_token');
            const token = localStorage.getItem('admin_token');
            
            if (!token) {
                addResult('auth-results', '‚úÖ –í—ã—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ');
                testResults.passed++;
                showMessage('–í—ã—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!', 'success');
            } else {
                addResult('auth-results', '‚ùå –û—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã');
                testResults.failed++;
                showMessage('–û—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞!', 'error');
            }
            
            testResults.total++;
            updateStats();
        }

        // –ó–∞–ø—É—Å–∫ JavaScript —Ç–µ—Å—Ç–æ–≤
        function runJavaScriptTests() {
            addResult('js-results', 'üß™ –ó–∞–ø—É—Å–∫ JavaScript unit-—Ç–µ—Å—Ç–æ–≤');
            
            if (typeof runAdminAuthTests === 'function') {
                const results = runAdminAuthTests();
                addResult('js-results', `üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã: ${results.passed} –ø—Ä–æ–π–¥–µ–Ω–æ, ${results.failed} –ø—Ä–æ–≤–∞–ª–µ–Ω–æ`);
                
                testResults.passed += results.passed;
                testResults.failed += results.failed;
                testResults.total += results.total;
                updateStats();
            } else {
                addResult('js-results', '‚ùå –§—É–Ω–∫—Ü–∏—è runAdminAuthTests –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
                testResults.failed++;
                testResults.total++;
                updateStats();
            }
        }

        // –¢–µ—Å—Ç localStorage
        function testLocalStorage() {
            addResult('js-results', 'üíæ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ localStorage');
            
            const testKey = 'test_key';
            const testValue = 'test_value';
            
            localStorage.setItem(testKey, testValue);
            const retrievedValue = localStorage.getItem(testKey);
            localStorage.removeItem(testKey);
            
            if (retrievedValue === testValue) {
                addResult('js-results', '‚úÖ localStorage —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
                testResults.passed++;
            } else {
                addResult('js-results', '‚ùå –û—à–∏–±–∫–∞ localStorage');
                testResults.failed++;
            }
            
            testResults.total++;
            updateStats();
        }

        // –¢–µ—Å—Ç DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        function testDOMElements() {
            addResult('js-results', 'üé® –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤');
            
            const usernameInput = document.getElementById('test-username');
            const passwordInput = document.getElementById('test-password');
            
            if (usernameInput && passwordInput) {
                addResult('js-results', '‚úÖ DOM —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞–π–¥–µ–Ω—ã');
                testResults.passed++;
            } else {
                addResult('js-results', '‚ùå DOM —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
                testResults.failed++;
            }
            
            testResults.total++;
            updateStats();
        }

        // –¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function testEventHandlers() {
            addResult('js-results', 'üñ±Ô∏è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π');
            
            const testButton = document.querySelector('.test-button');
            
            if (testButton && testButton.onclick !== null) {
                addResult('js-results', '‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
                testResults.passed++;
            } else {
                addResult('js-results', '‚ùå –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
                testResults.failed++;
            }
            
            testResults.total++;
            updateStats();
        }

        // –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        function testPerformance() {
            addResult('js-results', '‚ö° –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏');
            
            const startTime = performance.now();
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º 100 —Ç–æ–∫–µ–Ω–æ–≤
            for (let i = 0; i < 100; i++) {
                const token = 'admin_token_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('admin_token', token);
            }
            
            const endTime = performance.now();
            const duration = endTime - startTime;
            
            addResult('js-results', `‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ${duration.toFixed(2)}–º—Å`);
            
            if (duration < 100) {
                addResult('js-results', '‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –Ω–æ—Ä–º–µ');
                testResults.passed++;
            } else {
                addResult('js-results', '‚ùå –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∏–∑–∫–∞—è');
                testResults.failed++;
            }
            
            testResults.total++;
            updateStats();
        }

        // –¢–µ—Å—Ç —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
        function testSecurityScenarios() {
            addResult('security-results', 'üîí –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏');
            
            const commonPasswords = ['password', '123456', 'admin', 'root', 'test'];
            let securityTestsPassed = 0;
            
            commonPasswords.forEach(password => {
                if (!(password === 'admin123')) {
                    securityTestsPassed++;
                }
            });
            
            addResult('security-results', `‚úÖ ${securityTestsPassed}/${commonPasswords.length} —Ç–µ—Å—Ç–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–π–¥–µ–Ω–æ`);
            
            if (securityTestsPassed === commonPasswords.length) {
                testResults.passed++;
            } else {
                testResults.failed++;
            }
            
            testResults.total++;
            updateStats();
        }

        // –¢–µ—Å—Ç –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
        function testEdgeCases() {
            addResult('security-results', 'üéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤');
            
            const edgeCases = [
                { input: '', expected: false, name: '–ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞' },
                { input: null, expected: false, name: 'Null –∑–Ω–∞—á–µ–Ω–∏–µ' },
                { input: 'a'.repeat(1000), expected: true, name: '–û—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞' }
            ];
            
            let edgeTestsPassed = 0;
            
            edgeCases.forEach(testCase => {
                const result = testCase.input === 'admin123';
                if (result === testCase.expected) {
                    edgeTestsPassed++;
                }
            });
            
            addResult('security-results', `‚úÖ ${edgeTestsPassed}/${edgeCases.length} –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ`);
            
            if (edgeTestsPassed === edgeCases.length) {
                testResults.passed++;
            } else {
                testResults.failed++;
            }
            
            testResults.total++;
            updateStats();
        }

        // –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤–≤–æ–¥–∞
        function testInputValidation() {
            addResult('security-results', 'üìù –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤–≤–æ–¥–∞');
            
            const invalidInputs = ['<script>', 'javascript:', 'onclick=', 'admin<script>'];
            let validationTestsPassed = 0;
            
            invalidInputs.forEach(input => {
                if (!input.includes('<script>') && !input.includes('javascript:')) {
                    validationTestsPassed++;
                }
            });
            
            addResult('security-results', `‚úÖ ${validationTestsPassed}/${invalidInputs.length} —Ç–µ—Å—Ç–æ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–æ–π–¥–µ–Ω–æ`);
            
            if (validationTestsPassed === invalidInputs.length) {
                testResults.passed++;
            } else {
                testResults.failed++;
            }
            
            testResults.total++;
            updateStats();
        }

        // –ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        function testFullAuthFlow() {
            addResult('integration-results', 'üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏');
            
            try {
                // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
                const username = 'admin';
                const password = 'admin123';
                const credentialsValid = username === 'admin' && password === 'admin123';
                
                if (!credentialsValid) {
                    throw new Error('–ù–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ');
                }
                
                // 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞
                const token = 'admin_token_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('admin_token', token);
                
                // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
                const tokenValid = token.startsWith('admin_token_') && token.length > 20;
                
                if (!tokenValid) {
                    throw new Error('–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω');
                }
                
                // 4. –û—á–∏—Å—Ç–∫–∞ —Ç–æ–∫–µ–Ω–∞
                localStorage.removeItem('admin_token');
                
                addResult('integration-results', '‚úÖ –ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–π–¥–µ–Ω');
                testResults.passed++;
                
            } catch (error) {
                addResult('integration-results', `‚ùå –û—à–∏–±–∫–∞ –≤ –ø–æ—Ç–æ–∫–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: ${error.message}`);
                testResults.failed++;
            }
            
            testResults.total++;
            updateStats();
        }

        // –¢–µ—Å—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π
        function testPageRedirects() {
            addResult('integration-results', 'üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ç–æ–∫–µ–Ω–∞
            const token = localStorage.getItem('admin_token');
            
            if (!token) {
                addResult('integration-results', '‚úÖ –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞ (—Ç–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)');
                testResults.passed++;
            } else {
                addResult('integration-results', '‚úÖ –î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω (—Ç–æ–∫–µ–Ω –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç)');
                testResults.passed++;
            }
            
            testResults.total++;
            updateStats();
        }

        // –¢–µ—Å—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–µ–π
        function testSessionManagement() {
            addResult('integration-results', '‚è∞ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–µ–π');
            
            const token = 'admin_token_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            localStorage.setItem('admin_token', token);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            const savedToken = localStorage.getItem('admin_token');
            
            if (savedToken === token) {
                addResult('integration-results', '‚úÖ –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞');
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—á–∏—Å—Ç–∫—É
                localStorage.removeItem('admin_token');
                const clearedToken = localStorage.getItem('admin_token');
                
                if (!clearedToken) {
                    addResult('integration-results', '‚úÖ –°–µ—Å—Å–∏—è –æ—á–∏—â–µ–Ω–∞');
                    testResults.passed++;
                } else {
                    addResult('integration-results', '‚ùå –û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ —Å–µ—Å—Å–∏–∏');
                    testResults.failed++;
                }
            } else {
                addResult('integration-results', '‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏');
                testResults.failed++;
            }
            
            testResults.total++;
            updateStats();
        }

        // –û—á–∏—Å—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function clearResults() {
            document.getElementById('auth-results').textContent = '';
            document.getElementById('js-results').textContent = '';
            document.getElementById('security-results').textContent = '';
            document.getElementById('integration-results').textContent = '';
            
            testResults = { passed: 0, failed: 0, total: 0 };
            updateStats();
            
            showMessage('–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—á–∏—â–µ–Ω—ã!', 'success');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            updateStats();
            addResult('auth-results', 'üöÄ –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –≥–æ—Ç–æ–≤–∞');
            addResult('auth-results', 'üìù –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –≤—ã—à–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤');
        });
    </script>
</body>
</html>
