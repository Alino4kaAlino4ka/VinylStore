<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç—ã –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ - –ê—É–¥–∏—Ç–µ—Ä–∏—è</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #0F1014;
            color: #EAEAEA;
        }
        
        .test-container {
            background-color: #1A1B20;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #FF9900;
        }
        
        .test-header h1 {
            color: #FF9900;
            font-size: 28px;
            margin: 0;
        }
        
        .test-section {
            background-color: #2A2B30;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #FF9900;
        }
        
        .test-section h2 {
            color: #FF9900;
            margin-top: 0;
            margin-bottom: 15px;
        }
        
        .test-item {
            background-color: #3A3B40;
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
            border-left: 3px solid #6c757d;
        }
        
        .test-item.passed {
            border-left-color: #28a745;
            background-color: #1e3a1e;
        }
        
        .test-item.failed {
            border-left-color: #dc3545;
            background-color: #3a1e1e;
        }
        
        .test-item.running {
            border-left-color: #ffc107;
            background-color: #3a3a1e;
        }
        
        .test-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .test-result {
            font-size: 14px;
            margin-top: 5px;
        }
        
        .test-result.success {
            color: #28a745;
        }
        
        .test-result.error {
            color: #dc3545;
        }
        
        .test-result.info {
            color: #17a2b8;
        }
        
        button {
            background-color: #FF9900;
            color: #0F1014;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-weight: bold;
        }
        
        button:hover {
            background-color: #e68900;
        }
        
        button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        
        .run-all-btn {
            background-color: #28a745;
            font-size: 18px;
            padding: 15px 30px;
        }
        
        .run-all-btn:hover {
            background-color: #218838;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 15px;
            background-color: #2A2B30;
            border-radius: 8px;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #FF9900;
        }
        
        .stat-label {
            font-size: 14px;
            color: #ADADAD;
        }
        
        .admin-link {
            text-align: center;
            margin: 20px 0;
        }
        
        .admin-link a {
            color: #FF9900;
            text-decoration: none;
            font-size: 18px;
            font-weight: bold;
        }
        
        .admin-link a:hover {
            text-decoration: underline;
        }
        
        .test-data {
            background-color: #1A1B20;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            overflow-x: auto;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: #2A2B30;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background-color: #FF9900;
            transition: width 0.3s ease;
            width: 0%;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>üß™ –¢–µ—Å—Ç—ã –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏</h1>
            <p>–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏</p>
        </div>
        
        <div class="admin-link">
            <a href="admin.html" target="_blank">üîó –û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
        </div>
        
        <div class="stats">
            <div class="stat">
                <div class="stat-number" id="total-tests">0</div>
                <div class="stat-label">–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="passed-tests">0</div>
                <div class="stat-label">–ü—Ä–æ–π–¥–µ–Ω–æ</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="failed-tests">0</div>
                <div class="stat-label">–ü—Ä–æ–≤–∞–ª–µ–Ω–æ</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="success-rate">0%</div>
                <div class="stat-label">–£—Å–ø–µ—à–Ω–æ—Å—Ç—å</div>
            </div>
        </div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
        </div>
        
        <div style="text-align: center; margin: 20px 0;">
            <button class="run-all-btn" onclick="runAllTests()">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã</button>
            <button onclick="clearResults()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
            <button onclick="resetAdminData()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏</button>
        </div>
        
        <div class="test-section">
            <h2>üìã –¢–µ—Å—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏</h2>
            <div id="init-tests"></div>
        </div>
        
        <div class="test-section">
            <h2>üìù –¢–µ—Å—Ç—ã —Ñ–æ—Ä–º—ã</h2>
            <div id="form-tests"></div>
        </div>
        
        <div class="test-section">
            <h2>üìä –¢–µ—Å—Ç—ã –¥–∞–Ω–Ω—ã—Ö</h2>
            <div id="data-tests"></div>
        </div>
        
        <div class="test-section">
            <h2>üîß –¢–µ—Å—Ç—ã CRUD –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
            <div id="crud-tests"></div>
        </div>
        
        <div class="test-section">
            <h2>üíæ –¢–µ—Å—Ç—ã localStorage</h2>
            <div id="storage-tests"></div>
        </div>
        
        <div class="test-section">
            <h2>üé® –¢–µ—Å—Ç—ã UI</h2>
            <div id="ui-tests"></div>
        </div>
        
        <div class="test-section">
            <h2>‚ö†Ô∏è –¢–µ—Å—Ç—ã –æ—à–∏–±–æ–∫</h2>
            <div id="error-tests"></div>
        </div>
    </div>

    <script>
        let testResults = {
            total: 0,
            passed: 0,
            failed: 0
        };

        // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        const testProduct = {
            title: "–¢–µ—Å—Ç–æ–≤–∞—è –∫–Ω–∏–≥–∞",
            author_id: 999,
            description: "–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –∫–Ω–∏–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏",
            price: 99.99
        };

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
        function createTestElement(title, testFunction) {
            const testDiv = document.createElement('div');
            testDiv.className = 'test-item';
            testDiv.innerHTML = `
                <div class="test-title">${title}</div>
                <div class="test-result" id="result-${testResults.total}">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
            `;
            
            const resultDiv = testDiv.querySelector('.test-result');
            
            return {
                element: testDiv,
                resultDiv: resultDiv,
                run: async () => {
                    testDiv.className = 'test-item running';
                    resultDiv.textContent = '–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...';
                    
                    try {
                        const result = await testFunction();
                        if (result.success) {
                            testDiv.className = 'test-item passed';
                            resultDiv.className = 'test-result success';
                            resultDiv.textContent = result.message;
                            testResults.passed++;
                        } else {
                            testDiv.className = 'test-item failed';
                            resultDiv.className = 'test-result error';
                            resultDiv.textContent = result.message;
                            testResults.failed++;
                        }
                    } catch (error) {
                        testDiv.className = 'test-item failed';
                        resultDiv.className = 'test-result error';
                        resultDiv.textContent = `–û—à–∏–±–∫–∞: ${error.message}`;
                        testResults.failed++;
                    }
                    
                    testResults.total++;
                    updateStats();
                }
            };
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats() {
            document.getElementById('total-tests').textContent = testResults.total;
            document.getElementById('passed-tests').textContent = testResults.passed;
            document.getElementById('failed-tests').textContent = testResults.failed;
            
            const successRate = testResults.total > 0 ? 
                Math.round((testResults.passed / testResults.total) * 100) : 0;
            document.getElementById('success-rate').textContent = successRate + '%';
            
            const progress = testResults.total > 0 ? 
                (testResults.passed / testResults.total) * 100 : 0;
            document.getElementById('progress-fill').style.width = progress + '%';
        }

        // –¢–µ—Å—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        function createInitTests() {
            const container = document.getElementById('init-tests');
            
            const tests = [
                createTestElement('–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏', async () => {
                    const adminWindow = window.open('admin.html', '_blank');
                    if (adminWindow) {
                        await new Promise(resolve => setTimeout(resolve, 1000));
                        return { success: true, message: '–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ' };
                    }
                    return { success: false, message: '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å' };
                }),
                
                createTestElement('–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ DOM', async () => {
                    const adminWindow = window.open('admin.html', '_blank');
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    const hasForm = adminWindow.document.getElementById('product-form');
                    const hasTable = adminWindow.document.getElementById('products-table');
                    const hasTitle = adminWindow.document.querySelector('h1');
                    
                    if (hasForm && hasTable && hasTitle) {
                        return { success: true, message: '–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞–π–¥–µ–Ω—ã' };
                    }
                    return { success: false, message: '–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã' };
                }),
                
                createTestElement('–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö', async () => {
                    const adminWindow = window.open('admin.html', '_blank');
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    const tbody = adminWindow.document.querySelector('#products-table tbody');
                    const rows = tbody.querySelectorAll('tr');
                    
                    if (rows.length >= 3) {
                        return { success: true, message: `–ù–∞–π–¥–µ–Ω–æ ${rows.length} —Ç–æ–≤–∞—Ä–æ–≤` };
                    }
                    return { success: false, message: '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö' };
                })
            ];
            
            tests.forEach(test => {
                container.appendChild(test.element);
                test.run();
            });
        }

        // –¢–µ—Å—Ç—ã —Ñ–æ—Ä–º—ã
        function createFormTests() {
            const container = document.getElementById('form-tests');
            
            const tests = [
                createTestElement('–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã', async () => {
                    const adminWindow = window.open('admin.html', '_blank');
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    const form = adminWindow.document.getElementById('product-form');
                    const submitBtn = form.querySelector('button[type="submit"]');
                    
                    // –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—É—Å—Ç—É—é —Ñ–æ—Ä–º—É
                    submitBtn.click();
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ñ–æ—Ä–º–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏–ª–∞—Å—å
                    const titleInput = form.querySelector('#title');
                    if (titleInput.checkValidity() === false) {
                        return { success: true, message: '–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                    }
                    return { success: false, message: '–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                }),
                
                createTestElement('–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã', async () => {
                    const adminWindow = window.open('admin.html', '_blank');
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    const form = adminWindow.document.getElementById('product-form');
                    const titleInput = form.querySelector('#title');
                    const authorInput = form.querySelector('#author_id');
                    const descInput = form.querySelector('#description');
                    const priceInput = form.querySelector('#price');
                    
                    titleInput.value = testProduct.title;
                    authorInput.value = testProduct.author_id;
                    descInput.value = testProduct.description;
                    priceInput.value = testProduct.price;
                    
                    if (titleInput.value === testProduct.title && 
                        authorInput.value == testProduct.author_id &&
                        descInput.value === testProduct.description &&
                        priceInput.value == testProduct.price) {
                        return { success: true, message: '–§–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ' };
                    }
                    return { success: false, message: '–û—à–∏–±–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã' };
                })
            ];
            
            tests.forEach(test => {
                container.appendChild(test.element);
                test.run();
            });
        }

        // –¢–µ—Å—Ç—ã –¥–∞–Ω–Ω—ã—Ö
        function createDataTests() {
            const container = document.getElementById('data-tests');
            
            const tests = [
                createTestElement('–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö', async () => {
                    const savedData = localStorage.getItem('admin_products');
                    if (savedData) {
                        const products = JSON.parse(savedData);
                        if (Array.isArray(products) && products.length > 0) {
                            const firstProduct = products[0];
                            if (firstProduct.id && firstProduct.title && firstProduct.price !== undefined) {
                                return { success: true, message: '–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞' };
                            }
                        }
                    }
                    return { success: false, message: '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö' };
                }),
                
                createTestElement('–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö', async () => {
                    const savedData = localStorage.getItem('admin_products');
                    if (savedData) {
                        const products = JSON.parse(savedData);
                        const firstProduct = products[0];
                        
                        if (typeof firstProduct.id === 'number' &&
                            typeof firstProduct.title === 'string' &&
                            typeof firstProduct.price === 'number') {
                            return { success: true, message: '–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã' };
                        }
                    }
                    return { success: false, message: '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö' };
                }),
                
                createTestElement('–ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ ID', async () => {
                    const savedData = localStorage.getItem('admin_products');
                    if (savedData) {
                        const products = JSON.parse(savedData);
                        const ids = products.map(p => p.id);
                        const uniqueIds = [...new Set(ids)];
                        
                        if (ids.length === uniqueIds.length) {
                            return { success: true, message: '–í—Å–µ ID —É–Ω–∏–∫–∞–ª—å–Ω—ã' };
                        }
                    }
                    return { success: false, message: '–ù–∞–π–¥–µ–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è ID' };
                })
            ];
            
            tests.forEach(test => {
                container.appendChild(test.element);
                test.run();
            });
        }

        // –¢–µ—Å—Ç—ã CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
        function createCrudTests() {
            const container = document.getElementById('crud-tests');
            
            const tests = [
                createTestElement('–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞', async () => {
                    const adminWindow = window.open('admin.html', '_blank');
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    const form = adminWindow.document.getElementById('product-form');
                    const titleInput = form.querySelector('#title');
                    const authorInput = form.querySelector('#author_id');
                    const descInput = form.querySelector('#description');
                    const priceInput = form.querySelector('#price');
                    
                    titleInput.value = testProduct.title;
                    authorInput.value = testProduct.author_id;
                    descInput.value = testProduct.description;
                    priceInput.value = testProduct.price;
                    
                    const submitBtn = form.querySelector('button[type="submit"]');
                    submitBtn.click();
                    
                    await new Promise(resolve => setTimeout(resolve, 500));
                    
                    const tbody = adminWindow.document.querySelector('#products-table tbody');
                    const rows = tbody.querySelectorAll('tr');
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ç–æ–≤–∞—Ä –¥–æ–±–∞–≤–∏–ª—Å—è
                    let found = false;
                    for (let row of rows) {
                        const cells = row.querySelectorAll('td');
                        if (cells.length > 0 && cells[1].textContent === testProduct.title) {
                            found = true;
                            break;
                        }
                    }
                    
                    if (found) {
                        return { success: true, message: '–¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω' };
                    }
                    return { success: false, message: '–¢–æ–≤–∞—Ä –Ω–µ –±—ã–ª —Å–æ–∑–¥–∞–Ω' };
                }),
                
                createTestElement('–¢–µ—Å—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞', async () => {
                    const adminWindow = window.open('admin.html', '_blank');
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    const editBtn = adminWindow.document.querySelector('.edit-btn');
                    if (editBtn) {
                        editBtn.click();
                        await new Promise(resolve => setTimeout(resolve, 500));
                        
                        const form = adminWindow.document.getElementById('product-form');
                        const titleInput = form.querySelector('#title');
                        
                        if (titleInput.value) {
                            return { success: true, message: '–§–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω–∏–ª–∞—Å—å –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è' };
                        }
                    }
                    return { success: false, message: '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                }),
                
                createTestElement('–¢–µ—Å—Ç —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞', async () => {
                    const adminWindow = window.open('admin.html', '_blank');
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    const tbody = adminWindow.document.querySelector('#products-table tbody');
                    const initialRows = tbody.querySelectorAll('tr').length;
                    
                    const deleteBtn = adminWindow.document.querySelector('.delete-btn');
                    if (deleteBtn) {
                        // –°–∏–º—É–ª–∏—Ä—É–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
                        adminWindow.confirm = () => true;
                        deleteBtn.click();
                        
                        await new Promise(resolve => setTimeout(resolve, 500));
                        
                        const finalRows = tbody.querySelectorAll('tr').length;
                        
                        if (finalRows < initialRows) {
                            return { success: true, message: '–¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω' };
                        }
                    }
                    return { success: false, message: '–£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                })
            ];
            
            tests.forEach(test => {
                container.appendChild(test.element);
                test.run();
            });
        }

        // –¢–µ—Å—Ç—ã localStorage
        function createStorageTests() {
            const container = document.getElementById('storage-tests');
            
            const tests = [
                createTestElement('–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ localStorage', async () => {
                    const initialData = localStorage.getItem('admin_products');
                    if (initialData) {
                        return { success: true, message: '–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ localStorage' };
                    }
                    return { success: false, message: '–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ localStorage' };
                }),
                
                createTestElement('–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ localStorage', async () => {
                    const savedData = localStorage.getItem('admin_products');
                    if (savedData) {
                        const products = JSON.parse(savedData);
                        if (products.length > 0) {
                            return { success: true, message: `–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ${products.length} —Ç–æ–≤–∞—Ä–æ–≤` };
                        }
                    }
                    return { success: false, message: '–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ' };
                }),
                
                createTestElement('–¢–µ—Å—Ç –æ—á–∏—Å—Ç–∫–∏ localStorage', async () => {
                    localStorage.removeItem('admin_products');
                    const clearedData = localStorage.getItem('admin_products');
                    
                    if (clearedData === null) {
                        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ
                        const testData = [
                            { id: 1, title: "–¢–µ—Å—Ç", author_id: 1, description: "–û–ø–∏—Å–∞–Ω–∏–µ", price: 10 }
                        ];
                        localStorage.setItem('admin_products', JSON.stringify(testData));
                        return { success: true, message: 'localStorage –æ—á–∏—â–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ' };
                    }
                    return { success: false, message: 'localStorage –Ω–µ –æ—á–∏—â–∞–µ—Ç—Å—è' };
                })
            ];
            
            tests.forEach(test => {
                container.appendChild(test.element);
                test.run();
            });
        }

        // –¢–µ—Å—Ç—ã UI
        function createUiTests() {
            const container = document.getElementById('ui-tests');
            
            const tests = [
                createTestElement('–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª–µ–π –∫–Ω–æ–ø–æ–∫', async () => {
                    const adminWindow = window.open('admin.html', '_blank');
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    const submitBtn = adminWindow.document.querySelector('button[type="submit"]');
                    const editBtn = adminWindow.document.querySelector('.edit-btn');
                    const deleteBtn = adminWindow.document.querySelector('.delete-btn');
                    
                    if (submitBtn && editBtn && deleteBtn) {
                        return { success: true, message: '–í—Å–µ –∫–Ω–æ–ø–∫–∏ –Ω–∞–π–¥–µ–Ω—ã –∏ —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω—ã' };
                    }
                    return { success: false, message: '–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏' };
                }),
                
                createTestElement('–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü—ã', async () => {
                    const adminWindow = window.open('admin.html', '_blank');
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    const table = adminWindow.document.querySelector('#products-table');
                    const headers = table.querySelectorAll('th');
                    
                    if (headers.length >= 6) {
                        return { success: true, message: '–¢–∞–±–ª–∏—Ü–∞ –∏–º–µ–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏' };
                    }
                    return { success: false, message: '–¢–∞–±–ª–∏—Ü–∞ –Ω–µ–ø–æ–ª–Ω–∞—è' };
                }),
                
                createTestElement('–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π', async () => {
                    const adminWindow = window.open('admin.html', '_blank');
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    const errorDiv = adminWindow.document.getElementById('error-message');
                    const successDiv = adminWindow.document.getElementById('success-message');
                    
                    if (errorDiv && successDiv) {
                        return { success: true, message: '–≠–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞–π–¥–µ–Ω—ã' };
                    }
                    return { success: false, message: '–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π' };
                })
            ];
            
            tests.forEach(test => {
                container.appendChild(test.element);
                test.run();
            });
        }

        // –¢–µ—Å—Ç—ã –æ—à–∏–±–æ–∫
        function createErrorTests() {
            const container = document.getElementById('error-tests');
            
            const tests = [
                createTestElement('–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö', async () => {
                    try {
                        const invalidData = 'invalid json';
                        JSON.parse(invalidData);
                        return { success: false, message: '–û—à–∏–±–∫–∞ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞' };
                    } catch (error) {
                        return { success: true, message: '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è' };
                    }
                }),
                
                createTestElement('–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–Ω', async () => {
                    const adminWindow = window.open('admin.html', '_blank');
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    const priceInput = adminWindow.document.querySelector('#price');
                    priceInput.value = -10;
                    
                    if (priceInput.checkValidity() === false) {
                        return { success: true, message: '–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —Ü–µ–Ω—ã –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è' };
                    }
                    return { success: false, message: '–í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                }),
                
                createTestElement('–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Å—Ç—ã—Ö –ø–æ–ª–µ–π', async () => {
                    const adminWindow = window.open('admin.html', '_blank');
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    const titleInput = adminWindow.document.querySelector('#title');
                    titleInput.value = '';
                    
                    if (titleInput.checkValidity() === false) {
                        return { success: true, message: '–ü—É—Å—Ç—ã–µ –ø–æ–ª—è –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è' };
                    }
                    return { success: false, message: '–í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç—ã—Ö –ø–æ–ª–µ–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç' };
                })
            ];
            
            tests.forEach(test => {
                container.appendChild(test.element);
                test.run();
            });
        }

        // –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
        async function runAllTests() {
            testResults = { total: 0, passed: 0, failed: 0 };
            
            // –û—á–∏—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            document.querySelectorAll('.test-item').forEach(item => item.remove());
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Å–µ –≥—Ä—É–ø–ø—ã —Ç–µ—Å—Ç–æ–≤
            createInitTests();
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            createFormTests();
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            createDataTests();
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            createCrudTests();
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            createStorageTests();
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            createUiTests();
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            createErrorTests();
        }

        // –û—á–∏—Å—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function clearResults() {
            document.querySelectorAll('.test-item').forEach(item => item.remove());
            testResults = { total: 0, passed: 0, failed: 0 };
            updateStats();
        }

        // –°–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
        function resetAdminData() {
            localStorage.removeItem('admin_products');
            alert('–î–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Å–±—Ä–æ—à–µ–Ω—ã. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
        });
    </script>
</body>
</html>
