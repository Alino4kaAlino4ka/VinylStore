<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Å—Ç—ã–µ —Ç–µ—Å—Ç—ã –∫–æ—Ä–∑–∏–Ω—ã</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .console {
            background-color: #000;
            color: #0f0;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 500px;
            overflow-y: auto;
            margin: 20px 0;
            white-space: pre-wrap;
        }
        
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
        }
        
        button:hover {
            background-color: #0056b3;
        }
        
        .clear-btn {
            background-color: #dc3545;
        }
        
        .clear-btn:hover {
            background-color: #c82333;
        }
        
        .info {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .warning {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ –ü—Ä–æ—Å—Ç—ã–µ —Ç–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π –∫–æ—Ä–∑–∏–Ω—ã</h1>
        
        <div class="info">
            <strong>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong> –≠—Ç–æ—Ç —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π –∫–æ—Ä–∑–∏–Ω—ã.
            –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏ –Ω–∏–∂–µ.
        </div>
        
        <div class="warning">
            <strong>–í–∞–∂–Ω–æ:</strong> –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª <code>src/scripts/script.js</code> –ø–æ–¥–∫–ª—é—á–µ–Ω –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä–∑–∏–Ω—ã.
        </div>
        
        <div style="text-align: center; margin: 20px 0;">
            <button onclick="runSimpleTests()">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã</button>
            <button onclick="clearConsole()" class="clear-btn">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å</button>
        </div>
        
        <div class="console" id="console-output">
            <div style="color: #888;">–ö–æ–Ω—Å–æ–ª—å –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã" –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.</div>
        </div>
        
        <div class="info">
            <strong>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã:</strong>
            <ul>
                <li><a href="debug_cart.html">debug_cart.html</a> - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞</li>
                <li><a href="test_cart_frontend.html">test_cart_frontend.html</a> - –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤</li>
                <li><a href="test_cart_unit.html">test_cart_unit.html</a> - Unit-—Ç–µ—Å—Ç—ã</li>
            </ul>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç -->
    <script src="src/scripts/script.js"></script>
    
    <script>
        const consoleOutput = document.getElementById('console-output');
        
        // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º console.log –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –Ω–∞—à–µ–º —ç–ª–µ–º–µ–Ω—Ç–µ
        const originalConsoleLog = console.log;
        console.log = function(...args) {
            // –í—ã–∑—ã–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π console.log
            originalConsoleLog.apply(console, args);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—à –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
            const message = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ');
            
            const logElement = document.createElement('div');
            logElement.textContent = message;
            logElement.style.marginBottom = '2px';
            
            // –¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
            if (message.includes('‚úÖ')) {
                logElement.style.color = '#28a745';
            } else if (message.includes('‚ùå')) {
                logElement.style.color = '#dc3545';
            } else if (message.includes('üß™') || message.includes('üìã')) {
                logElement.style.color = '#ffc107';
            } else if (message.includes('üéâ')) {
                logElement.style.color = '#17a2b8';
            } else if (message.includes('‚ö†Ô∏è')) {
                logElement.style.color = '#fd7e14';
            } else if (message.includes('‚ÑπÔ∏è')) {
                logElement.style.color = '#6f42c1';
            }
            
            consoleOutput.appendChild(logElement);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        };
        
        // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º console.error
        const originalConsoleError = console.error;
        console.error = function(...args) {
            originalConsoleError.apply(console, args);
            
            const message = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ');
            
            const errorElement = document.createElement('div');
            errorElement.textContent = 'ERROR: ' + message;
            errorElement.style.color = '#dc3545';
            errorElement.style.marginBottom = '2px';
            
            consoleOutput.appendChild(errorElement);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        };
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–æ–Ω—Å–æ–ª–∏
        function clearConsole() {
            consoleOutput.innerHTML = '<div style="color: #888;">–ö–æ–Ω—Å–æ–ª—å –æ—á–∏—â–µ–Ω–∞.</div>';
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ—Å—Ç—ã—Ö —Ç–µ—Å—Ç–æ–≤
        function runSimpleTests() {
            console.log('üß™ –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Å—Ç—ã—Ö —Ç–µ—Å—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π –∫–æ—Ä–∑–∏–Ω—ã...');
            
            // –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ñ—É–Ω–∫—Ü–∏–π
            console.log('\nüìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ñ—É–Ω–∫—Ü–∏–π:');
            const functions = ['getCart', 'saveCart', 'addToCart', 'updateCartCount'];
            let allFunctionsFound = true;
            
            functions.forEach(func => {
                if (typeof window[func] === 'function') {
                    console.log(`‚úÖ ${func}() - –Ω–∞–π–¥–µ–Ω–∞`);
                } else {
                    console.log(`‚ùå ${func}() - –ù–ï –Ω–∞–π–¥–µ–Ω–∞`);
                    allFunctionsFound = false;
                }
            });
            
            if (!allFunctionsFound) {
                console.log('\n‚ö†Ô∏è –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ script.js');
                console.log('–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –µ—Å—Ç—å: <script src="src/scripts/script.js"></script>');
                return;
            } else {
                console.log('\nüéâ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞–π–¥–µ–Ω—ã! –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...');
            }
            
            // –¢–µ—Å—Ç 2: getCart() —Å –ø—É—Å—Ç–æ–π –∫–æ—Ä–∑–∏–Ω–æ–π
            console.log('\nüß™ –¢–µ—Å—Ç getCart() —Å –ø—É—Å—Ç–æ–π –∫–æ—Ä–∑–∏–Ω–æ–π:');
            try {
                localStorage.removeItem('cart');
                const emptyCart = getCart();
                if (Array.isArray(emptyCart) && emptyCart.length === 0) {
                    console.log('‚úÖ getCart() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤');
                } else {
                    console.log(`‚ùå getCart() –≤–µ—Ä–Ω—É–ª: ${JSON.stringify(emptyCart)}`);
                }
            } catch (error) {
                console.log(`‚ùå –û—à–∏–±–∫–∞ –≤ getCart(): ${error.message}`);
            }
            
            // –¢–µ—Å—Ç 3: saveCart() –∏ getCart()
            console.log('\nüß™ –¢–µ—Å—Ç saveCart() –∏ getCart():');
            try {
                const testCart = ['item1', 'item2', 'item3'];
                saveCart(testCart);
                const retrievedCart = getCart();
                if (JSON.stringify(testCart) === JSON.stringify(retrievedCart)) {
                    console.log('‚úÖ saveCart() –∏ getCart() —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
                } else {
                    console.log(`‚ùå –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç. –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: ${JSON.stringify(testCart)}, –ø–æ–ª—É—á–µ–Ω–æ: ${JSON.stringify(retrievedCart)}`);
                }
            } catch (error) {
                console.log(`‚ùå –û—à–∏–±–∫–∞ –≤ saveCart()/getCart(): ${error.message}`);
            }
            
            // –¢–µ—Å—Ç 4: addToCart()
            console.log('\nüß™ –¢–µ—Å—Ç addToCart():');
            try {
                localStorage.removeItem('cart');
                
                addToCart('test-product-1');
                const cart = getCart();
                if (cart.includes('test-product-1') && cart.length === 1) {
                    console.log('‚úÖ addToCart() –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–æ–≤–∞—Ä');
                } else {
                    console.log(`‚ùå addToCart() –¥–æ–±–∞–≤–∏–ª —Ç–æ–≤–∞—Ä –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ö–æ—Ä–∑–∏–Ω–∞: ${JSON.stringify(cart)}`);
                }
                
                // –¢–µ—Å—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
                addToCart('test-product-1');
                const cartAfterDuplicate = getCart();
                if (cartAfterDuplicate.length === 1) {
                    console.log('‚úÖ addToCart() –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã');
                } else {
                    console.log(`‚ùå addToCart() –¥–æ–±–∞–≤–∏–ª –¥—É–±–ª–∏–∫–∞—Ç. –ö–æ—Ä–∑–∏–Ω–∞: ${JSON.stringify(cartAfterDuplicate)}`);
                }
            } catch (error) {
                console.log(`‚ùå –û—à–∏–±–∫–∞ –≤ addToCart(): ${error.message}`);
            }
            
            // –¢–µ—Å—Ç 5: updateCartCount()
            console.log('\nüß™ –¢–µ—Å—Ç updateCartCount():');
            try {
                // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —Å—á–µ—Ç—á–∏–∫–∞ –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
                if (!document.getElementById('cart-count')) {
                    const countElement = document.createElement('span');
                    countElement.id = 'cart-count';
                    countElement.textContent = '0';
                    document.body.appendChild(countElement);
                    console.log('‚ÑπÔ∏è –°–æ–∑–¥–∞–Ω —ç–ª–µ–º–µ–Ω—Ç —Å—á–µ—Ç—á–∏–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã');
                }
                
                addToCart('count-test-1');
                addToCart('count-test-2');
                updateCartCount();
                
                const countElement = document.getElementById('cart-count');
                if (countElement && countElement.textContent === '2') {
                    console.log('‚úÖ updateCartCount() –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—á–µ—Ç—á–∏–∫');
                } else {
                    console.log(`‚ùå updateCartCount() –æ–±–Ω–æ–≤–∏–ª —Å—á–µ—Ç—á–∏–∫ –Ω–∞: ${countElement ? countElement.textContent : '—ç–ª–µ–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω'}`);
                }
            } catch (error) {
                console.log(`‚ùå –û—à–∏–±–∫–∞ –≤ updateCartCount(): ${error.message}`);
            }
            
            // –¢–µ—Å—Ç 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ localStorage
            console.log('\nüß™ –¢–µ—Å—Ç localStorage:');
            try {
                const testData = ['localStorage-test'];
                localStorage.setItem('cart', JSON.stringify(testData));
                const stored = localStorage.getItem('cart');
                if (stored === JSON.stringify(testData)) {
                    console.log('‚úÖ localStorage —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
                } else {
                    console.log(`‚ùå localStorage –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç. –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: ${stored}, –æ–∂–∏–¥–∞–ª–æ—Å—å: ${JSON.stringify(testData)}`);
                }
            } catch (error) {
                console.log(`‚ùå –û—à–∏–±–∫–∞ –≤ localStorage: ${error.message}`);
            }
            
            // –¢–µ—Å—Ç 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π
            console.log('\nüß™ –¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π:');
            try {
                // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é –∫–Ω–æ–ø–∫—É
                const testButton = document.createElement('button');
                testButton.className = 'add-to-cart-btn';
                testButton.setAttribute('data-product-id', 'event-test');
                testButton.textContent = '–¢–µ—Å—Ç–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞';
                document.body.appendChild(testButton);
                
                // –°–∏–º—É–ª–∏—Ä—É–µ–º –∫–ª–∏–∫
                testButton.click();
                
                const cart = getCart();
                if (cart.includes('event-test')) {
                    console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç');
                } else {
                    console.log(`‚ùå –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª. –ö–æ—Ä–∑–∏–Ω–∞: ${JSON.stringify(cart)}`);
                }
                
                // –£–¥–∞–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—É—é –∫–Ω–æ–ø–∫—É
                testButton.remove();
            } catch (error) {
                console.log(`‚ùå –û—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ —Å–æ–±—ã—Ç–∏–π: ${error.message}`);
            }
            
            console.log('\nüéâ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!');
            console.log('\nüìä –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–∫—Ä–æ–π—Ç–µ:');
            console.log('- debug_cart.html - –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏');
            console.log('- test_cart_frontend.html - –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ —Ç–µ—Å—Ç–æ–≤');
            console.log('- test_cart_unit.html - –¥–ª—è unit-—Ç–µ—Å—Ç–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏');
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞. –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!');
            console.log('–ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã" –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π –∫–æ—Ä–∑–∏–Ω—ã.');
        });
    </script>
</body>
</html>
