# Админ-панель Аудитерия

## Описание

Админ-панель для управления товарами в интернет-магазине аудиокниг. Позволяет создавать, редактировать и удалять товары через удобный веб-интерфейс.

## Доступ

- **URL**: `http://localhost:8000/admin/admin.html`
- **Порт**: 8000 (Catalog Service)

## Функциональность

### 1. Управление товарами
- ✅ **Просмотр всех товаров** - таблица с полной информацией
- ✅ **Создание новых товаров** - форма добавления
- ✅ **Редактирование товаров** - изменение существующих
- ✅ **Удаление товаров** - с подтверждением

### 2. Поля товара
- **Название товара** - обязательное поле
- **ID автора** - для связи с существующим автором
- **Имя автора** - для создания нового автора
- **Описание** - подробное описание товара
- **Цена** - стоимость в рублях
- **URL обложки** - ссылка на изображение

### 3. Интерфейс
- Современный дизайн с белым фоном
- Адаптивная таблица товаров
- Форма с валидацией
- Уведомления об успехе/ошибках
- Fallback режим при недоступности сервера

## API Endpoints

### Админ-эндпоинты
```
GET    /api/v1/admin/products     - Получить все товары
GET    /api/v1/admin/products/{id} - Получить товар по ID
POST   /api/v1/admin/products     - Создать новый товар
PUT    /api/v1/admin/products/{id} - Обновить товар
DELETE /api/v1/admin/products/{id} - Удалить товар
GET    /api/v1/admin/authors      - Получить всех авторов
```

### Публичные эндпоинты
```
GET    /api/v1/products           - Получить товары для каталога
GET    /api/v1/products/{id}      - Получить товар для каталога
GET    /health                    - Проверка здоровья сервиса
```

## Запуск

### 1. Запуск всех сервисов
```bash
start_all_services.bat
```

### 2. Запуск только Catalog Service
```bash
start_catalog.bat
```

### 3. Ручной запуск
```bash
cd services/catalog
python -c "from main import app; import uvicorn; uvicorn.run(app, host='127.0.0.1', port=8000, reload=True)"
```

## Тестирование

### 1. Тест админ-панели
Откройте `test_admin_panel.html` для проверки:
- Работы Catalog Service
- API товаров
- Создания товаров

### 2. Проверка сервисов
```bash
# Проверка здоровья
curl http://localhost:8000/health

# Получение товаров
curl http://localhost:8000/api/v1/admin/products
```

## Структура данных

### Товар (Product)
```json
{
  "id": 1,
  "name": "Название товара",
  "author": "Имя автора",
  "author_id": 1,
  "description": "Описание товара",
  "price": 29.99,
  "cover_url": "https://example.com/image.jpg"
}
```

### Автор (Author)
```json
{
  "id": 1,
  "name": "Имя автора"
}
```

## Особенности

### Fallback режим
- При недоступности сервера админ-панель работает в локальном режиме
- Данные сохраняются в памяти браузера
- Все функции доступны без сервера

### Валидация
- Обязательные поля: название, описание, цена
- Проверка формата цены
- Валидация URL обложки

### UX/UI
- Современный дизайн
- Интуитивный интерфейс
- Быстрая обратная связь
- Подтверждение действий

## Интеграция

Админ-панель интегрирована с:
- **Catalog Service** - основной сервис каталога
- **Cart Service** - корзина покупок
- **Orders Service** - оформление заказов
- **Frontend** - главная страница магазина

## Безопасность

⚠️ **Важно**: В продакшене необходимо добавить:
- Аутентификацию администраторов
- Авторизацию доступа к админ-панели
- Валидацию входных данных на сервере
- Логирование действий администраторов
